{% extends 'layout.html' %}

{% block stylesheet %}
<link rel="stylesheet" type="text/css" href="{{ url_for('client_bp.static', filename='css/components/customizable-sspi.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/charts/panel-chart.css') }}">
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/charts/sspi-panel-chart.css') }}">
{% endblock %}

{% block content %}
<div id="sspi-root"></div>
{% endblock %}

{% block javascript %}
<!-- Chart.js Library -->
<script src="{{ url_for('static', filename='dist/chart.umd.min.js') }}"></script>

<!-- PapaParse for CSV parsing -->
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>

<!-- Chart Plugins -->
<script src="{{ url_for('static', filename='charts/plugins/chart-interaction-plugin.js') }}"></script>
<script src="{{ url_for('static', filename='js/extrapolate-backward-plugin.js') }}"></script>

<!-- SSPI Utilities -->
<script src="{{ url_for('static', filename='js/sspi-colors.js') }}"></script>
<script src="{{ url_for('static', filename='js/sspi-item-tree.js') }}"></script>
<script src="{{ url_for('static', filename='js/country-selector.js') }}"></script>
<script src="{{ url_for('static', filename='js/observable-storage.js') }}"></script>

<!-- Panel Chart Components -->
<script src="{{ url_for('static', filename='charts/panel/panel-chart.js') }}"></script>
<script src="{{ url_for('static', filename='charts/panel/sspi-panel-chart.js') }}"></script>
<script src="{{ url_for('static', filename='charts/panel/custom-sspi-panel-chart.js') }}"></script>

<!-- Initialize Customizable SSPI Structure -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    const root = document.getElementById('sspi-root');
    window.SSPICharts.push(
        new CustomizableSSPIStructure(root)
    );
});
</script>
{% endblock %}
